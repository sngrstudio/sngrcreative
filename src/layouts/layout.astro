---
import BaseLayout, { type Props as BaseLayoutProps } from './base.astro'
import Meta, { type Props as MetaProps } from './meta.astro'
import { getEntry } from 'astro:content'

export interface Props extends BaseLayoutProps, Omit<MetaProps, 'site'> {}

const { title, description, canonical, ...props } = Astro.props
const site = await getEntry('site', 'site')
if (!site) {
  throw new Error('No site data found.')
}
---

<BaseLayout {...props}>
  {/* <body> */}
  <slot />

  {/* <head> */}
  <Fragment slot='head'>
    <Meta
      title={title}
      description={description}
      canonical={canonical}
      site={site}
    />
    <slot name='head' />
  </Fragment>
</BaseLayout>
